# 服务详情

和服务器详情页面一样，OpsMind 为每个服务都提供了一个完整的详情页面用来快速了解一个服务的整体状况，同时可以选择多个维度对服务进行更细致地数据拆分与聚合。

点击左侧菜单栏中的业务概况下拉，选中要查看的服务名称。右侧即会出现该服务的各种指标信息，例如：

![](../.gitbook/assets/service-sel.png)

服务详情主要分为四个板块：**服务业务总览**、**服务资源占用**、**服务 API 性能指标**、**服务依赖 API 指标**。

注意：其中除了 **服务资源占用** 之外的板块数据均依赖 **协议分析功能**，因此若一个服务存在以下几种情况，这几个板块会空白无数据：

1. 服务没有任何业务流量
2. 服务使用了 OpsMind 当前不支持的业务协议

OpsMind 支持大部分主流的业务协议，若您的业务使用了自定义的私有协议，也可联系我们进行定制开发。

## 服务业务总览

服务详情的第一部分为该服务的总体概览，例如：

![](../.gitbook/assets/service-summary-2.png)

左侧为该服务整体承受的每秒请求量大小，以及每种响应类型的个数（例如 HTTP Status Code）。 右侧为该服务每个 API 响应耗时的中位数（也叫50值，即 50% 的请求耗时不高于这个时间）。

## 服务资源占用

第二部分为该服务 **自身占用的各项资源** 随时间变化的情况，默认只展示物理内存与 CPU 使用率。可点击右下角的 **更多资源** 展开其他更加详细的资源指标。

![](../.gitbook/assets/service-res.png)

需要注意的是，由于相同服务可能存在于多台服务器，因此这里每种资源消耗均按服务器维度计算出 max/mid/min 三个值进行展示。

服务在每台服务器上具体占用情况请移步 **实时查询指标项数据** 一节。

## 服务 API 性能指标

第三部分为该服务对外监听的各个 API 的业务指标，所有数据均按配置的 API 独立统计与展示，例如：

![](../.gitbook/assets/service-api-list.png)

API 列表会按每秒请求量大小从高到低排列，每一行代表该服务的一个 API，在 API 名称后面会标明各自的请求量大小。

点击一个 API（以 `POST /v1/users/*/login` 为例）左侧的 "&gt;&gt;" 标记可展开该 API 的详细指标数据，例如：

![](../.gitbook/assets/service-api-cspg-brief.png)

展开后会出现该 API 的每秒请求量（左图）以及完成请求的总体耗时情况（右图），右图中，红色线条表示耗时的 95值，绿色线条表示 50值（即中位数）。

除此之外，点击右下角的 **详情** 按钮，会展开更丰富细致的数据指标，请参考 **业务指标 CSPG** 一节。

提示：您可以直接点击 "&gt;&gt;API" 右侧的 "配置api" 跳转到 API 配置页面对该服务进行 API 配置。

## 服务依赖 API 指标

除了能够查看某个服务作为服务端对外提供的 API 指标外，业务详情的第四部分会显示出该服务所依赖的外部 API 指标信息，同样默认是其依赖的 API 列表：

![](../.gitbook/assets/service-dep-api-list.png)

上图中可以看到该服务向后依赖了 redis 的 MGET 指令，以及 mongodb 对表 users.sessions 的 upsert 操作指令。

和 **服务 API 性能指标** 一样，服务依赖的每个 API 均能点击展开以查看更为详细的指标。

## 选择更细的维度查看数据

在服务详情页面顶部，您会看到有下图所示的 6 个下拉区域：

![](../.gitbook/assets/service-filter.png)

分别为：

1. **时间范围**（默认为一小时），对该页面上所有时间序列图有效
2. **服务对象**，可随时通过此区域更换查看的服务
3. **集群**，默认为全部集群，可切换单个集群
4. **业务**，默认为全部业务，具体含义参考 **服务与业务组** 一节
5. **业务（细分）**，默认为全部，具体含义参考 **服务与业务组** 一节
6. **会话类型**，默认为所有

以上所有选择条件均为组合条件，共同决定页面显示的数据维度。

